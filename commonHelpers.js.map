{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet futureTime = null;\n\nconst buttonStart = document.querySelector('[data-start]');\n\nbuttonStart.addEventListener('click', onStartTimer);\n\nfunction onStartTimer(e) {\n  e.currentTarget.disabled = true;\n\n  new CountTimer({\n    selector: '.timer',\n    targetDate: futureTime,\n  });\n  document.querySelector('#datetime-picker').disabled = true;\n  dataFlatpickr.destroy();\n  buttonStart.removeEventListener('click', onStartTimer);\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose({ 0: selectedDate }) {\n    if (selectedDate.getTime() <= Date.now()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n        position: 'topRight',\n      });\n      futureTime = null;\n      buttonStart.disabled = true;\n      return;\n    }\n    futureTime = selectedDate;\n    buttonStart.disabled = false;\n  },\n};\n\nconst dataFlatpickr = flatpickr('#datetime-picker', options);\n\nclass CountTimer {\n  #second = 1000;\n  #minute = this.#second * 60;\n  #hour = this.#minute * 60;\n  #day = this.#hour * 24;\n\n  #selector;\n  #targetDate;\n  #refs;\n\n  constructor({ selector, targetDate }) {\n    this.#selector = document.querySelector(selector);\n    this.#targetDate = targetDate;\n\n    this.#refs = {\n      days: this.#selector.querySelector('[data-days]'),\n      hours: this.#selector.querySelector('[data-hours]'),\n      mins: this.#selector.querySelector('[data-minutes]'),\n      secs: this.#selector.querySelector('[data-seconds]'),\n    };\n\n    this.#updateTimeOnce();\n    this.#updateTimeOnline();\n  }\n\n  #updateTimeOnce() {\n    if (this.#targetDate.getTime() <= Date.now()) return;\n\n    const ms = this.#targetDate.getTime() - Date.now();\n    this.#updateMarkup(this.#convertMs(ms));\n  }\n\n  #updateTimeOnline() {\n    const timer = setInterval(() => {\n      const ms = this.#targetDate.getTime() - Date.now();\n\n      if (ms < 1) {\n        clearInterval(timer);\n        return;\n      }\n\n      this.#updateMarkup(this.#convertMs(ms));\n    }, 1000);\n  }\n\n  #convertMs(ms) {\n    const days = Math.floor(ms / this.#day);\n    const hours = Math.floor((ms % this.#day) / this.#hour);\n    const mins = Math.floor(((ms % this.#day) % this.#hour) / this.#minute);\n    const secs = Math.floor(\n      (((ms % this.#day) % this.#hour) % this.#minute) / this.#second\n    );\n\n    return { days, hours, mins, secs };\n  }\n\n  #updateMarkup({ days, hours, mins, secs }) {\n    const daysString = this.#addLoadingZero(days);\n    const hoursString = this.#addLoadingZero(hours);\n    const minsString = this.#addLoadingZero(mins);\n    const secsString = this.#addLoadingZero(secs);\n\n    this.#refs.days.textContent = daysString;\n    this.#refs.hours.textContent = hoursString;\n    this.#refs.mins.textContent = minsString;\n    this.#refs.secs.textContent = secsString;\n  }\n\n  #addLoadingZero(value) {\n    return String(value).padStart(2, '0');\n  }\n}\n"],"names":["futureTime","buttonStart","onStartTimer","e","CountTimer","dataFlatpickr","options","selectedDate","iziToast","flatpickr","selector","targetDate","__privateAdd","_updateTimeOnce","_updateTimeOnline","_convertMs","_updateMarkup","_addLoadingZero","_second","_minute","__privateGet","_hour","_day","_selector","_targetDate","_refs","__privateSet","__privateMethod","updateTimeOnce_fn","updateTimeOnline_fn","ms","updateMarkup_fn","convertMs_fn","timer","days","hours","mins","secs","daysString","addLoadingZero_fn","hoursString","minsString","secsString","value"],"mappings":"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"}